<!DOCTYPE html>
<html lang="en">
	<head>
	<meta charset="utf-8">
	<title>std.internal.math.biguintx86 - Phobos documentation</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- styles -->
	<link href="bootDoc/assets/css/bootstrap.css" rel="stylesheet">
	<style type="text/css">
		body {
		padding-top: 60px;
		padding-bottom: 40px;
		}
		.sidebar-nav {
		padding: 9px 0;
		}
	</style>
	<link href="bootDoc/assets/css/bootstrap-responsive.css" rel="stylesheet">
	<link href="bootDoc/bootdoc.css" rel="stylesheet">

	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- fav and touch icons -->
	<link rel="shortcut icon" href="favicon.ico">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootDoc/assets/ico/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootDoc/assets/ico/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="bootDoc/assets/ico/apple-touch-icon-57-precomposed.png">
	
	<!-- Introduce DDoc settings required by JavaScript -->
	<script type="text/javascript">
		var Title = 'std.internal.math.biguintx86';
		var SourceRepository = 'https://github.com/D-Programming-Language/phobos/tree/master';
		var Modules = [
			
	"index",
	"etc.c.curl",
	"etc.c.sqlite3",
	"etc.c.zlib",
	"std.algorithm",
	"std.array",
	"std.ascii",
	"std.base64",
	"std.bigint",
	"std.bind",
	"std.bitmanip",
	"std.c.fenv",
	"std.c.locale",
	"std.c.math",
	"std.c.process",
	"std.c.stdarg",
	"std.c.stddef",
	"std.c.stdio",
	"std.c.stdlib",
	"std.c.string",
	"std.c.time",
	"std.c.wcharh",
	"std.c.windows.com",
	"std.c.windows.stat",
	"std.c.windows.windows",
	"std.c.windows.winsock",
	"std.compiler",
	"std.complex",
	"std.concurrency",
	"std.container",
	"std.conv",
	"std.cpuid",
	"std.cstream",
	"std.csv",
	"std.datetime",
	"std.demangle",
	"std.encoding",
	"std.exception",
	"std.file",
	"std.format",
	"std.functional",
	"std.getopt",
	"std.internal.math.biguintcore",
	"std.internal.math.biguintnoasm",
	"std.internal.math.biguintx86",
	"std.internal.math.errorfunction",
	"std.internal.math.gammafunction",
	"std.internal.processinit",
	"std.internal.uni",
	"std.internal.uni_tab",
	"std.internal.windows.advapi32",
	"std.json",
	"std.loader",
	"std.math",
	"std.mathspecial",
	"std.md5",
	"std.metastrings",
	"std.mmfile",
	"std.net.curl",
	"std.net.isemail",
	"std.numeric",
	"std.outbuffer",
	"std.parallelism",
	"std.path",
	"std.perf",
	"std.process",
	"std.random",
	"std.range",
	"std.regex",
	"std.regexp",
	"std.signals",
	"std.socket",
	"std.socketstream",
	"std.stdarg",
	"std.stdint",
	"std.stdio",
	"std.stdiobase",
	"std.stream",
	"std.string",
	"std.syserror",
	"std.system",
	"std.traits",
	"std.typecons",
	"std.typetuple",
	"std.uni",
	"std.uri",
	"std.utf",
	"std.variant",
	"std.windows.charset",
	"std.windows.iunknown",
	"std.windows.registry",
	"std.windows.syserror",
	"std.xml",
	"std.zip",
	"std.zlib",
	"unittest",
		];
	</script>
	
	<style type="text/css">
		.ddoc-icon-variable { background-image: url('bootDoc/ddoc-icons/var.png'); }
		.ddoc-icon-function { background-image: url('bootDoc/ddoc-icons/func.png'); }
		.ddoc-icon-property { background-image: url('bootDoc/ddoc-icons/property.png'); }
		.ddoc-icon-struct { background-image: url('bootDoc/ddoc-icons/struct.png'); }
		.ddoc-icon-class { background-image: url('bootDoc/ddoc-icons/class.png'); }
		.ddoc-icon-enum { background-image: url('bootDoc/ddoc-icons/enum.png'); }
		.ddoc-icon-template { background-image: url('bootDoc/ddoc-icons/template.png'); }
	</style>
	</head>

	<body>
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container-fluid">
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</a>
				<a class="brand" href="index.html">Phobos</a>
				<div class="nav-collapse">
					<ul class="nav">
						<li class="active"><a href="index.html">Reference</a></li>
					</ul>
					
					<form id="gotosymbol" class="navbar-search pull-left hidden">
						<input type="text" class="search-query" placeholder="Goto symbol in std.internal.math.biguintx86" data-provide="typeahead" data-items="4">
					</form>
					
					<p class="navbar-text pull-right"><a href="https://github.com/D-Programming-Language/phobos">Github Page</a></p>
				</div><!--/.nav-collapse -->
			</div>
		</div>
	</div>

	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span2">
				<div class="well sidebar-nav">
				<ul class="nav nav-list">
					<li id="module-list" class="nav-header">Modules<li>
					<li id="symbol-list" class="nav-header hidden">std.internal.math.biguintx86</li>
				</ul>
				</div><!--/.well -->
			</div><!--/span-->
			
			<div class="span10">
				<div class="row-fluid">
					<div class="span11">
						<ul id="module-breadcrumb" class="breadcrumb">
							<noscript><h1>std.internal.math.biguintx86</h1></noscript>
						</ul>
						
					</div>
					<div class="span1 offset11">
						<a href="index.html"><img src="dlogo-small.png" alt="The D Programming Language"/></a>
					</div>
				</div>
				<div id="declaration-list">
					<!-- Generated by Ddoc from phobos\std\internal\math\biguintx86.d -->
<p>Optimised asm arbitrary precision arithmetic ('bignum')
 routines for X86 processors.
</p>

<p>All functions operate on arrays of uints, stored LSB first.
 If there is a destination array, it will be the first parameter.
 Currently, all of these functions are subject to change, and are
 intended for internal use only.
 The symbol [#] indicates an array of machine words which is to be
 interpreted as a multi-byte number.
 
<br><br>

 In simple terms, there are 3 modern x86 microarchitectures:
 (a) the P6 family (Pentium Pro, PII, PIII, PM, Core), produced by Intel;
 (b) the K6, Athlon, and AMD64 families, produced by AMD; and
 (c) the Pentium 4, produced by Marketing.
<br><br>

 This code has been optimised for the Intel P6 family.
 Generally the code remains near-optimal for Intel Core2/Corei7, after
 translating EAX-&gt; RAX, etc, since all these CPUs use essentially the same
 pipeline, and are typically limited by memory access.
 The code uses techniques described in Agner Fog's superb Pentium manuals
 available at www.agner.org.
 Not optimised for AMD, which can do two memory loads per cycle (Intel
 CPUs can only do one). Despite this, performance is superior on AMD.
 Performance is dreadful on P4.
<br><br>

  Timing results (cycles per int)
              --Intel Pentium--  --AMD--
              PM     P4   Core2   K7
  +,-         2.25  15.6   2.25   1.5
  &lt;&lt;,&gt;&gt;       2.0    6.6   2.0    5.0
    (&lt;&lt; MMX)  1.7    5.3   1.5    1.2
  *           5.0   15.0   4.0    4.3
  mulAdd      5.7   19.0   4.9    4.0
  div        30.0   32.0  32.0   22.4
  mulAcc(32)  6.5   20.0   5.4    4.9
<br><br>

 mulAcc(32) is multiplyAccumulate() for a 32*32 multiply. Thus it includes
 function call overhead.
 The timing for Div is quite unpredictable, but it's probably too slow
 to be useful. On 64-bit processors, these times should
 halve if run in 64-bit mode, except for the MMX functions.</p>

<hr><div class="row-fluid declaration"><h3>uint <a class="symbol symbol-anchor" name="multibyteAddSub" href="#multibyteAddSub">multibyteAddSub</a>(char op)(uint[] <i>dest</i>, const uint[] <i>src1</i>, const uint[] <i>src2</i>, uint <i>carry</i>);
</h3></div>

<div class="declaration-content"><p>Multi-byte addition or subtraction
    dest[#] = src1[#] + src2[#] + carry (0 or 1).
 or dest[#] = src1[#] - src2[#] - carry (0 or 1).
 Returns carry or borrow (0 or 1).
 Set op == '+' for addition, '-' for subtraction.</p>


</div>

<hr><div class="row-fluid declaration"><h3>uint <a class="symbol symbol-anchor" name="multibyteIncrementAssign" href="#multibyteIncrementAssign">multibyteIncrementAssign</a>(char op)(uint[] <i>dest</i>, uint <i>carry</i>);
</h3></div>

<div class="declaration-content"><p>dest[#] += carry, or dest[#] -= carry.
  op must be '+' or '-'
  Returns final carry or borrow (0 or 1)</p>


</div>

<hr><div class="row-fluid declaration"><h3>@system uint <a class="symbol symbol-anchor" name="multibyteShlNoMMX" href="#multibyteShlNoMMX">multibyteShlNoMMX</a>(uint[] <i>dest</i>, const uint[] <i>src</i>, uint <i>numbits</i>);
</h3></div>

<div class="declaration-content"><p><i>dest</i>[#] = <i>src</i>[#] &lt;&lt; <i>numbits</i>
  <i>numbits</i> must be in the range 1..31
  Returns the overflow</p>


</div>

<hr><div class="row-fluid declaration"><h3>@system uint <a class="symbol symbol-anchor" name="multibyteShl" href="#multibyteShl">multibyteShl</a>(uint[] <i>dest</i>, const uint[] <i>src</i>, uint <i>numbits</i>);
</h3></div>

<div class="declaration-content"><p><i>dest</i>[#] = <i>src</i>[#] &gt;&gt; <i>numbits</i>
  <i>numbits</i> must be in the range 1..31
 This version uses MMX.</p>


</div>

<hr><div class="row-fluid declaration"><h3>@system void <a class="symbol symbol-anchor" name="multibyteShrNoMMX" href="#multibyteShrNoMMX">multibyteShrNoMMX</a>(uint[] <i>dest</i>, const uint[] <i>src</i>, uint <i>numbits</i>);
</h3></div>

<div class="declaration-content"><p><i>dest</i>[#] = <i>src</i>[#] &gt;&gt; <i>numbits</i>
  <i>numbits</i> must be in the range 1..31</p>


</div>

<hr><div class="row-fluid declaration"><h3>@system uint <a class="symbol symbol-anchor" name="multibyteMul" href="#multibyteMul">multibyteMul</a>(uint[] <i>dest</i>, const uint[] <i>src</i>, uint <i>multiplier</i>, uint <i>carry</i>);
</h3></div>

<div class="declaration-content"><p><i>dest</i>[#] = <i>src</i>[#] * <i>multiplier</i> + <i>carry</i>.
 Returns <i>carry</i>.</p>


</div>

<hr><div class="row-fluid declaration"><h3>uint <a class="symbol symbol-anchor" name="multibyteMulAdd" href="#multibyteMulAdd">multibyteMulAdd</a>(char op)(uint[] <i>dest</i>, const uint[] <i>src</i>, uint <i>multiplier</i>, uint <i>carry</i>);
</h3></div>

<div class="declaration-content"><p>dest[#] += src[#] * multiplier OP carry(0..FFFF_FFFF).
 where op == '+' or '-'
 Returns carry out of MSB (0..FFFF_FFFF).</p>


</div>

<hr><div class="row-fluid declaration"><h3>@system void <a class="symbol symbol-anchor" name="multibyteMultiplyAccumulate" href="#multibyteMultiplyAccumulate">multibyteMultiplyAccumulate</a>(uint[] <i>dest</i>, const uint[] <i>left</i>, const uint[] <i>right</i>);
</h3></div>

<div class="declaration-content"><p>Sets result[#] = result[0..<i>left</i>.length] + <i>left</i>[#] * <i>right</i>[#]
</p>

<p>It is defined in this way to allow cache-efficient multiplication.
   This function is equivalent to:
<pre class="d_code">    <span class="d_keyword">for</span> (<span class="d_keyword">int</span> i = 0; i&lt; <b>right</b>.length; ++i) {
        <b>dest</b>[<b>left</b>.length + i] = multibyteMulAdd(<b>dest</b>[i..<b>left</b>.length+i],
                <b>left</b>, <b>right</b>[i], 0);
    }
</pre>
</p>

</div>

<hr><div class="row-fluid declaration"><h3>@system uint <a class="symbol symbol-anchor" name="multibyteDivAssign" href="#multibyteDivAssign">multibyteDivAssign</a>(uint[] <i>dest</i>, uint <i>divisor</i>, uint <i>overflow</i>);
</h3></div>

<div class="declaration-content"><p><i>dest</i>[#] /= <i>divisor</i>.
 <i>overflow</i> is the initial remainder, and must be in the range 0..<i>divisor</i>-1.
 <i>divisor</i> must not be a power of 2 (use right shift for that case;
 A division by zero will occur if <i>divisor</i> is a power of 2).
 Returns the final remainder
</p>

<p>Based on public domain code by Eric Bainville.
 (http://www.bealto.com/) Used with permission.</p>

</div>



				</div>
			</div>
			
			<hr>
			
			<div class="pull-right">
				<footer>
					<p>&copy; Your Name Here 2012-2012</p>
				</footer>
			</div>
		</div>
	</div><!--/.fluid-container-->

	<!-- Bootstrap javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="bootDoc/assets/js/jquery.js"></script>
	<script src="bootDoc/assets/js/bootstrap-transition.js"></script>
	<script src="bootDoc/assets/js/bootstrap-alert.js"></script>
	<script src="bootDoc/assets/js/bootstrap-modal.js"></script>
	<script src="bootDoc/assets/js/bootstrap-dropdown.js"></script>
	<script src="bootDoc/assets/js/bootstrap-scrollspy.js"></script>
	<script src="bootDoc/assets/js/bootstrap-tab.js"></script>
	<script src="bootDoc/assets/js/bootstrap-tooltip.js"></script>
	<script src="bootDoc/assets/js/bootstrap-popover.js"></script>
	<script src="bootDoc/assets/js/bootstrap-button.js"></script>
	<script src="bootDoc/assets/js/bootstrap-collapse.js"></script>
	<script src="bootDoc/assets/js/bootstrap-carousel.js"></script>
	<script src="bootDoc/assets/js/bootstrap-typeahead.js"></script>
	
	<!-- bootDoc javascript
	================================================== -->
	<script src="bootDoc/bootdoc.js"></script>
	
	</body>
</html>

